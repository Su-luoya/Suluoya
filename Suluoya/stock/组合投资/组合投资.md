# 组合投资

# 马科维茨投资组合

```Python
from Suluoya.stock import Markovitz
from pprint import pprint

# 初始化
mk = Markovitz(names=['比亚迪', '阳光电源', '璞泰来', '紫光国微', '盛新锂能'], # 股票组合
               start_date='2021-05-01', # 开始日期
               end_date='2021-11-01', # 结束日期
               frequency='w', # 'd' or 'w' or 'm' → 日、周、月
               no_risk_rate=0.023467, # 无风险利率
               funds=10000000, # 最大资金限制
               path='Cache' # 数据缓存路径
               )

# 组合中股票个数
pprint(mk.lens)

# 股票数据
pprint(mk.data)

# 输入日期范围中第一个**开市日期** 
pprint(mk.first_date) 

# 输入日期范围中最后一个**开市日期** 
pprint(mk.end_date) 

# 输入日期范围中第一个开市日期所有股票**开盘** 价格
pprint(mk.first_price) 

# 输入日期范围中最后一个开市日期所有股票**收盘** 价格
pprint(mk.last_price) 

# 计算收益率**均值** 、**协方差** 矩阵、**相关系数** 矩阵
pprint(mk.calculate())

# 收益率相关系数**热力图**  
mk.heatmap()

# 非线性规划求解**最大夏普比率** 
pprint(mk.optimization())

# **散点** 数据，默认生成5000个
pprint(mk.scatter_data(number=5000))

# **边界散点** 数据，默认生成500个
pprint(mk.boundary_scatter_data(number=500))

# **有效边界** 散点图
mk.drawing()

# **初始** 临近整数组合
pprint(mk.init_port())

# **最优整数解** （整数非线性规划）
pprint(mk.buy())

# 构建所有股票个数为number的组合
pprint(mk.weight_tests(number=3))
```


# 瞎搞的组合k线图

```Python
from Suluoya.stock import Markovitz
from Suluoya.stock import SyntheticIndex
from pprint import pprint

# 初始化
mk = Markovitz(names=['比亚迪', '阳光电源', '璞泰来', '紫光国微', '盛新锂能'], # 股票组合
               start_date='2021-05-01', # 开始日期
               end_date='2021-11-01', # 结束日期
               frequency='d', # 'd' or 'w' or 'm' → 日、周、月
               no_risk_rate=0.023467, # 无风险利率
               path='Cache' # 数据缓存路径
               )
               
# 最优权重              
weights = mk.optimization()['weights']
pprint(weights)

# 按照权重构建股票组合指数+指数k线图
si = SyntheticIndex(weights=weights,path='Suluoya cache')
si.draw_chart() # 保存为一个html文件
```


